---
Title: ダウンタイム
Date: 2019-07-16T13:00:00+09:00
URL: https://mackerel.io/ja/docs/entry/howto/downtimes
EditURL: https://blog.hatena.ne.jp/mackerelio/mackerelio-docs-ja.hatenablog.mackerel.io/atom/entry/26006613422755482
---

ダウンタイム機能は、指定した期間、条件に一致するアラートの発生を抑制します。たとえば、サーバーの計画停止などによって発生してしまうアラートを抑制するのに役立ちます。

[:contents]

## 仕様

- ダウンタイム期間中は「絞込」条件に一致するホストや監視ルールにおいてアラートが発生しなくなります。
- ダウンタイム期間中に抑制されたアラートはダウンタイムが終了しても発生しません。
  - たとえばホストメトリック監視を例にした場合、以下のようなケースではアラートが発生しません。
    - ダウンタイム期間中に閾値を超え、閾値を超えたままダウンタイムが終了した場合。
    - ダウンタイム期間中に閾値を超え、ダウンタイム中に閾値を下回った場合。
    - ダウンタイム期間中に閾値を超え、ダウンタイム終了後に閾値を下回った場合。
  - 死活監視に限り、ダウンタイム中にホストとの通信が途絶え、ダウンタイム終了後も通信が途絶えている場合は、アラートが発生します。
- 監視ルールに通知の再送設定がある場合、アラートの発生がダウンタイム開始前であっても、ダウンタイム期間中は通知が停止します。
- ダウンタイム設定の数に上限はありません。

## ダウンタイムを設定する

[ダウンタイム設定画面](https://mackerel.io/my/downtimes)から設定できます。

[f:id:mackerelio:20240216091314p:plain]

### 基本設定

| 設定項目 | 説明 |
| --- | --- |
| ダウンタイム名 | ダウンタイムの識別名を指定します。 |
| ダウンタイムのメモ | ダウンタイム設定に関する詳細や目的をメモとして残します。 |

### ダウンタイム期間

| 設定項目 | 説明 |
| --- | --- |
| ダウンタイム開始日時 | ダウンタイムを開始する日時を指定します。<br />月末日にダウンタイムを有効にしたい場合、日付を`31日`に設定すると月末日が28日、29日、30日の月でもダウンタイムが有効になります。 |
| ダウンタイム期間 | 開始日時からダウンタイムを有効にする期間を指定します。 |
| 繰り返し設定 | ダウンタイムを一定の間隔で繰り返す場合は`あり`にします。 |

繰り返し設定を`あり`にすると、以下の項目が指定できます。

| 設定項目 | 説明 |
| --- | --- |
| 間隔 | ダウンタイムを繰り返す間隔を `時間ごと` `日ごと` `週ごと` `月ごと` `年ごと` で指定します。<br />`週ごと`を指定する場合は、任意の曜日にチェックをつけてください。 |
| ダウンタイム終了日時 | ダウンタイムを終了する日時を指定します。（無期限で繰り返す場合は`なし`を選択） |

#### 注意点

- ダウンタイムの期間が24時間以上かつ日曜日から月曜日をまたぐ場合、開始日時によって、24時間以降もしくは月曜日0:00以降のダウンタイムが無効になります。
  - ダウンタイムの開始日時が日曜日の場合は、24時間経過後のダウンタイムが無効になります。
    - 例：日曜日7:00開始で、期間が25時間の場合、月曜日7:00以降（7:00〜8:00）が無効になります。
  - ダウンタイムの開始日時が月曜日から土曜日の場合は、月曜日0:00以降が無効になります。
    - 例：土曜日7:00開始で、期間が49時間の場合、月曜日0:00以降（0:00〜8:00）が無効になります。
  - ダウンタイムの期間が24時間を超える場合は、日曜日から月曜日をまたがないようにご注意ください。

### 絞込

| 設定項目 | 説明 |
| --- | --- |
| サービス / ロール | ダウンタイムの対象もしくは除外するサービス / ロールを指定します。 |
| 監視ルール | ダウンタイムの対象もしくは除外する監視ルールを指定します。 |

絞込条件はAND条件となります。式による監視や、サービスに紐づけていないURL外形監視などは、サービス/ロールを同時に指定しないようご注意ください。
